#:import Popup kivy.uix.popup
#:import Clock kivy.clock

<DevToolbar@StackLayout>:
    orientation: 'bt-rl'
    pos_hint: {'top': 1, 'right': 1}
    height: self.minimum_height
    padding: dp(5)
    spacing: dp(5)

    DevToolbarButton:
        text: 'Test Gravity'
        on_press: app.open_option_popup()

    DevToolbarButton:
        text: 'Clear All'
        on_press: app.simulation_grid._reset_graph()

    GravityButton:
        id: gravity_btn
        text: 'Vertical'
        font_size: 18
        size_hint: 1, None

<DevToolbarButton@Button>:
    size_hint: 1, None
    pos_hint: {'x': 0}
    font_size: 18

<GravityButton@Button>:
    size_hint: 1, None
    font_size: 18
    on_release: app.open_gravity_dropdown(self)

<GravityOption@Button>:
    size_hint_y: None
    height: dp(40)
    font_size: 16

<OptionPopup@Popup>:
    title: 'Particle Tests'
    id: option_popup
    font_size: 24
    size_hint: .35, None
    height: box.height + label.height + dp(20)
    auto_dismiss: True
    BoxLayout:
        id: box
        size_hint_y: None
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        height: self.minimum_height
        width: self.minimum_width
        orientation: 'vertical'
        padding: dp(10)
        spacing: dp(10)
        Label:
            id: label
            text: "Number of Particles to add."
            font_size: 20
            text_size: self.width, None
            size_hint_y: None
            height: self.texture_size[1]
            halign: 'center'
            valign: 'top'
        TextInput:
            id: particle_count
            text: app.state.dev_states.get('test_gravity', '0')
            font_size: 16
            multiline: False
            input_filter: 'int'
            pos_hint: {'center_x': 0.5}
            size_hint: .33, None
            height: dp(40)
        Button:
            text: 'Ok'
            font_size: 16
            pos_hint: {'center_x': 0.5}
            size_hint: .25, None
            height: dp(40)
            on_press: app.dismiss_option_popup(root, int(particle_count.text))
        Button:
            text: 'Cancel'
            font_size: 16
            pos_hint: {'center_x': 0.5}
            size_hint: .25, None
            height: dp(40)
            on_press: app.dismiss_option_popup(root, 0)
